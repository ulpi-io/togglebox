# ============================================================================
# TOGGLEBOX - OPEN SOURCE CONFIGURATION SERVICE
# Environment Variables Template
# ============================================================================
# Copy this file to .env and fill in the values
# NEVER commit .env files to version control
# ============================================================================

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Node environment: development, staging, production
NODE_ENV=development

# Server port (default: 3000)
PORT=3000

# Application URL (used in emails, OAuth callbacks, etc.)
APP_URL=http://localhost:3000

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Allowed CORS origins (comma-separated for multiple origins, or use '*')
# Examples:
#   CORS_ORIGIN=http://localhost:3001,https://app.example.com
#   CORS_ORIGIN=*
CORS_ORIGIN=*

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Database type selection
# Options: mysql, postgresql, sqlite, mongodb, dynamodb, d1
DB_TYPE=sqlite

# ----------------------------------------------------------------------------
# MySQL Configuration (if DB_TYPE=mysql)
# ----------------------------------------------------------------------------
MYSQL_URL=mysql://<USERNAME>:<PASSWORD>@<HOST>:3306/togglebox

# ----------------------------------------------------------------------------
# PostgreSQL Configuration (if DB_TYPE=postgresql)
# ----------------------------------------------------------------------------
POSTGRES_URL=postgresql://<USERNAME>:<PASSWORD>@<HOST>:5432/togglebox

# ----------------------------------------------------------------------------
# MongoDB Configuration (if DB_TYPE=mongodb)
# ----------------------------------------------------------------------------
MONGO_URL=mongodb://<USERNAME>:<PASSWORD>@<HOST>:27017/togglebox
MONGODB_URI=mongodb://<USERNAME>:<PASSWORD>@<HOST>:27017/togglebox

# ----------------------------------------------------------------------------
# SQLite Configuration (if DB_TYPE=sqlite)
# ----------------------------------------------------------------------------
SQLITE_FILE=./data/config.db

# ----------------------------------------------------------------------------
# DynamoDB Configuration (if DB_TYPE=dynamodb - AWS Lambda deployment)
# ----------------------------------------------------------------------------
# AWS Region
AWS_REGION=us-east-1

# AWS Credentials (for local development/testing only)
# In production, use IAM roles instead
AWS_ACCESS_KEY_ID=<GENERATE_AWS_ACCESS_KEY_ID>
AWS_SECRET_ACCESS_KEY=<GENERATE_AWS_SECRET_ACCESS_KEY>

# DynamoDB table name
DYNAMODB_TABLE=configurations
DYNAMODB_TABLE_NAME=configurations

# DynamoDB region
DYNAMODB_REGION=us-east-1

# DynamoDB local endpoint (for testing with DynamoDB Local)
# Comment out for production AWS DynamoDB
DYNAMODB_ENDPOINT=http://localhost:8000

# Optional table prefix for multi-tenancy
TABLE_PREFIX=

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# Enable/disable authentication (true/false)
# CODE DEFAULT: false (disabled) when not set
# RECOMMENDED: Set to 'true' for production
# NOTE: Auth is disabled by default for easier local development
ENABLE_AUTHENTICATION=false

# ----------------------------------------------------------------------------
# JWT Configuration
# ----------------------------------------------------------------------------

# JWT secret key (REQUIRED if authentication is enabled)
# MUST be at least 32 characters for security
# Generate with: openssl rand -base64 32
JWT_SECRET=<GENERATE_RANDOM_STRING_MIN_32_CHARS>

# JWT expiration time (examples: 24h, 7d, 30d)
JWT_EXPIRES_IN=24h

# JWT signing algorithm (HS256, HS384, HS512, RS256, etc.)
JWT_ALGORITHM=HS256

# JWT issuer (identifies who created the token)
JWT_ISSUER=togglebox

# JWT audience (identifies who the token is intended for)
JWT_AUDIENCE=togglebox-api

# ----------------------------------------------------------------------------
# API Key Configuration
# ----------------------------------------------------------------------------

# API key secret (for service-to-service authentication)
# Generate with: openssl rand -base64 32
API_KEY_SECRET=<GENERATE_RANDOM_STRING_MIN_32_CHARS>

# API key expiration (default: 365d for long-lived keys)
API_KEY_EXPIRES_IN=365d

# ============================================================================
# AWS CLOUDFRONT CDN (Optional - for caching)
# ============================================================================

# CloudFront distribution ID (for cache invalidation)
# Leave empty if not using CloudFront
CLOUDFRONT_DISTRIBUTION_ID=

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: trace, debug, info, warn, error, fatal
LOG_LEVEL=info

# ----------------------------------------------------------------------------
# Grafana Cloud Integration (Optional)
# ----------------------------------------------------------------------------

# Grafana Cloud API key (for centralized logging)
GRAFANA_CLOUD_API_KEY=

# Grafana Cloud logs endpoint
GRAFANA_CLOUD_URL=https://logs-prod-us-central1.grafana.net

# ============================================================================
# RATE LIMITING
# ============================================================================

# Rate limit window in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Maximum requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# EMAIL CONFIGURATION (Optional - if using email features)
# ============================================================================

# SMTP server configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=<YOUR_SMTP_USERNAME>
SMTP_PASS=<YOUR_SMTP_PASSWORD>

# Email sender details
FROM_EMAIL=noreply@togglebox.com
FROM_NAME=Togglebox

# ============================================================================
# CACHE CONFIGURATION (Optional)
# ============================================================================

# Cache TTL in seconds (default: 3600 = 1 hour)
CACHE_TTL=3600

# Cache max age in seconds (default: 86400 = 24 hours)
CACHE_MAX_AGE=86400

# ============================================================================
# DEVELOPMENT & DEBUGGING
# ============================================================================

# Package version (auto-populated by npm)
npm_package_version=1.0.0

# ============================================================================
# DEPLOYMENT-SPECIFIC VARIABLES
# ============================================================================

# Netlify deployment context (auto-populated by Netlify)
# Values: production, deploy-preview, branch-deploy
CONTEXT=

# ============================================================================
# NOTES
# ============================================================================
#
# Security Best Practices:
# 1. Never commit .env files to version control
# 2. Use different secrets for each environment
# 3. Rotate secrets regularly (quarterly recommended)
# 4. Use strong, randomly generated secrets (32+ characters)
# 5. Enable authentication in production (ENABLE_AUTHENTICATION=true)
# 6. Use IAM roles in AWS instead of access keys
#
# Database Selection Guide:
# - Development: sqlite (simplest, no setup required)
# - AWS Lambda: dynamodb (serverless, scalable)
# - Cloudflare Workers: d1 (edge database)
# - Self-hosted: mysql or postgresql (traditional, reliable)
# - Document store: mongodb (flexible schemas)
#
# Required Variables by Deployment:
# - AWS Lambda: DB_TYPE=dynamodb, DYNAMODB_TABLE, AWS_REGION
# - Cloudflare Workers: DB_TYPE=d1 (configured in wrangler.toml)
# - Docker/Self-hosted: DB_TYPE=mysql|postgresql|sqlite, corresponding DB URL
# - Authentication enabled: JWT_SECRET, API_KEY_SECRET
#
# ============================================================================
