# ============================================================================
# TOGGLEBOX API - Environment Variables
# ============================================================================
# This is a simplified .env.example for the API app
# For complete documentation, see: ../../.env.example
# ============================================================================

# Server Configuration
NODE_ENV=development
PORT=3000

# CORS Configuration
CORS_ORIGIN=*

# Database Selection
# Options: mysql, postgresql, sqlite, mongodb, dynamodb, d1
DB_TYPE=dynamodb

# Database URLs (choose based on DB_TYPE)
MYSQL_URL=mysql://<USERNAME>:<PASSWORD>@<HOST>:3306/togglebox
POSTGRES_URL=postgresql://<USERNAME>:<PASSWORD>@<HOST>:5432/togglebox
MONGO_URL=mongodb://<USERNAME>:<PASSWORD>@<HOST>:27017/togglebox
MONGODB_URI=mongodb://<USERNAME>:<PASSWORD>@<HOST>:27017/togglebox-auth
SQLITE_FILE=./data/config.db

# MongoDB Connection Pool (optional - defaults shown)
# DATABASE_MAX_POOL_SIZE=10
# DATABASE_MIN_POOL_SIZE=2
# DATABASE_MAX_IDLE_TIME_MS=60000

# DynamoDB Configuration (for AWS Lambda deployment)
AWS_REGION=us-east-1
DYNAMODB_TABLE=configurations
DYNAMODB_ENDPOINT=http://localhost:8000

# AWS Credentials (optional - prefer IAM roles in production)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=

# DynamoDB Table Names (optional - defaults shown)
# TABLE_PREFIX=                                          # Global prefix for all tables
# DYNAMODB_USERS_TABLE=togglebox-users
# DYNAMODB_API_KEYS_TABLE=togglebox-api-keys
# DYNAMODB_PASSWORD_RESETS_TABLE=togglebox-password-resets
# DYNAMODB_PLATFORMS_TABLE=togglebox-platforms
# DYNAMODB_ENVIRONMENTS_TABLE=togglebox-environments
# DYNAMODB_CONFIGS_TABLE=togglebox-configs
# DYNAMODB_REMOTE_CONFIGS_TABLE=togglebox-remote-configs
# DYNAMODB_FLAGS_TABLE=togglebox-flags
# DYNAMODB_EXPERIMENTS_TABLE=togglebox-experiments
# DYNAMODB_STATS_TABLE=togglebox-stats
# DYNAMODB_USAGE_TABLE=togglebox-usage

# Authentication (ENABLED by default for security)
# Generate secrets with: openssl rand -base64 32
# ⚠️ IMPORTANT: Replace placeholder values before starting the application!
# ⚠️ Application will FAIL to start if placeholders are used
# ⚠️ Secrets must be at least 32 characters long
ENABLE_AUTHENTICATION=true
JWT_SECRET=J5NBiex3TaB6NRiEAKsqSqcPheBN4bC5LRUYj3P3Wmo=
JWT_EXPIRES_IN=24h
API_KEY_SECRET=J5NBiex3TaB6NRiEAKsqSqcPheBN4bC5LRUYj3P3Wmo=

# JWT Advanced Configuration (optional - defaults shown)
# JWT_ALGORITHM=HS256                    # Options: HS256, HS384, HS512
# JWT_ISSUER=config-service
# JWT_AUDIENCE=config-service-api
# API_KEY_EXPIRES_IN=365d

# Cache Configuration (optional)
CACHE_ENABLED=false
CACHE_PROVIDER=none # Options: cloudfront, cloudflare, none
CACHE_TTL=3600 # Browser cache TTL in seconds (default: 1 hour)
CACHE_MAX_AGE=86400 # CDN cache TTL in seconds (default: 24 hours)

# CloudFront Configuration (when CACHE_PROVIDER=cloudfront)
CLOUDFRONT_DISTRIBUTION_ID=

# Cloudflare Configuration (when CACHE_PROVIDER=cloudflare)
CLOUDFLARE_ZONE_ID=
CLOUDFLARE_API_TOKEN=

# Logging
LOG_LEVEL=debug

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Email (optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
FROM_EMAIL=noreply@togglebox.com
FROM_NAME=Togglebox

# Application URL
APP_URL=http://localhost:3000

# ============================================================================
# DEPLOYMENT NOTES
# ============================================================================
#
# AWS Lambda Deployment (serverless.yml):
#   - Set DB_TYPE=dynamodb
#   - Configure DYNAMODB_TABLE, AWS_REGION
#   - Authentication enforced via VPC/API Gateway Resource Policy
#
# Cloudflare Workers Deployment (wrangler.toml):
#   - Set DB_TYPE=d1
#   - Configure secrets: wrangler secret put JWT_SECRET
#   - ENABLE_AUTHENTICATION=true required (no VPC protection)
#
# Docker/Self-hosted Deployment:
#   - Choose DB_TYPE: mysql, postgresql, sqlite, or mongodb
#   - Configure corresponding DATABASE_URL
#   - Set ENABLE_AUTHENTICATION=true for production
#
# ============================================================================
